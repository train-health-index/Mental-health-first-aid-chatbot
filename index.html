<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="MindAid Pro - Your mental health first aid assistant">
    <meta name="author" content="MindAid Team">
    <title>MindAid Pro - Mental Health First Aid</title>
    <!-- Boxicons CDN -->
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <!-- Poppins Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Confetti.js -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary: #ff6f91;
            --primary-dark: #e05577;
            --secondary: #a29bfe;
            --secondary-dark: #7f7bff;
            --accent: #feca57;
            --background: #f4e7ff;
            --card-bg: rgba(255, 255, 255, 0.2);
            --text: #2d3436;
            --success: #55efc4;
            --info: #74c0fc;
            --container-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Poppins", sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--background) 0%, #ffdeeb 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: var(--text);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container, .auth-container {
            width: 100%;
            max-width: 1200px;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: var(--container-shadow);
            border: 1px solid rgba(255, 255, 255, 0.3);
            overflow: hidden;
        }

        .auth-container {
            max-width: 400px;
            padding: 40px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .auth-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-form input {
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            font-size: 1rem;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            transition: var(--transition);
        }

        .auth-form input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(162, 155, 254, 0.2);
        }

        .auth-form button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(255, 111, 145, 0.3);
        }

        .auth-form button:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        .auth-toggle {
            color: var(--secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .auth-toggle:hover {
            color: var(--secondary-dark);
        }

        .container {
            display: flex;
            flex-direction: column;
            height: 95vh;
        }

        header {
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            background: rgba(255, 255, 255, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .logo-icon i {
            font-size: 20px;
        }

        .logo-text h1 {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .logo-text .subtitle {
            font-size: 0.85rem;
            opacity: 0.8;
        }

        .user-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .user-btn, .chat-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .chat-btn {
            background: var(--primary);
            box-shadow: 0 4px 15px rgba(255, 111, 145, 0.3);
        }

        .user-btn:hover, .chat-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
        }

        .chat-btn:hover {
            background: var(--primary-dark);
        }

        .language-selector {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .language-selector:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.3);
        }

        .app-body {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 240px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            display: flex;
            flex-direction: column;
            padding: 20px 0;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            border-left: 4px solid transparent;
        }

        .nav-item i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
            font-size: 20px;
            color: var(--secondary);
        }

        .nav-item.active, .nav-item:hover {
            background: rgba(162, 155, 254, 0.2);
            color: var(--secondary-dark);
            border-left: 4px solid var(--secondary-dark);
        }

        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .tab-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .motivational {
            background: linear-gradient(45deg, var(--success) 0%, #00b894 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
            text-align: center;
            font-style: italic;
            font-size: 1.1rem;
            box-shadow: 0 4px 15px rgba(85, 239, 196, 0.3);
        }

        .chat-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 75%;
            padding: 12px 18px;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            line-height: 1.5;
            animation: fadeIn 0.3s ease;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(5px);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            background: rgba(162, 155, 254, 0.2);
            border: 1px solid rgba(162, 155, 254, 0.3);
            border-bottom-left-radius: 4px;
            align-self: flex-start;
        }

        .user-message {
            background: rgba(255, 111, 145, 0.2);
            border-bottom-right-radius: 4px;
            align-self: flex-end;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.6;
            margin-top: 6px;
            display: block;
        }

        .typing-indicator {
            display: inline-flex;
            padding: 12px 18px;
            background: rgba(162, 155, 254, 0.2);
            border-radius: 15px;
            border-bottom-left-radius: 4px;
            align-self: flex-start;
            border: 1px solid rgba(162, 155, 254, 0.3);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--secondary);
            border-radius: 50%;
            margin: 0 3px;
            animation: typing 1.2s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-4px); }
        }

        .crisis-alert {
            background: linear-gradient(90deg, #ff7675 0%, #d63031 100%);
            color: white;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 4px 15px rgba(255, 118, 117, 0.3);
        }

        .resources-card {
            background: var(--info);
            color: white;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            box-shadow: 0 4px 12px rgba(116, 192, 252, 0.3);
        }

        .input-container {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            gap: 10px;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.05);
        }

        #user-input {
            flex: 1;
            padding: 12px 18px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            outline: none;
            font-size: 0.9rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
        }

        #user-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(162, 155, 254, 0.2);
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .quick-reply {
            background: rgba(255, 111, 145, 0.1);
            color: var(--primary);
            border: 1px solid rgba(255, 111, 145, 0.3);
            border-radius: 12px;
            padding: 8px 12px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .quick-reply:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 111, 145, 0.3);
        }

        .tab-title {
            font-size: 1.6rem;
            color: var(--text);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tab-title i {
            background: var(--secondary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
        }

        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .card {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--container-shadow);
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            padding: 15px;
            background: rgba(255, 255, 255, 0.2);
            font-weight: 600;
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-header i {
            color: var(--primary);
            font-size: 18px;
        }

        .card-body {
            padding: 15px;
        }

        .resource-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .resource-item:last-child {
            border-bottom: none;
        }

        .resource-icon {
            background: rgba(85, 239, 196, 0.2);
            color: var(--success);
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .resource-content h3 {
            font-size: 1rem;
            margin-bottom: 4px;
            color: var(--text);
        }

        .resource-content p {
            font-size: 0.9rem;
            color: var(--text);
            opacity: 0.8;
            margin-bottom: 6px;
        }

        .resource-content a {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .resource-content a:hover {
            text-decoration: underline;
        }

        .chart-container {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--container-shadow);
            margin-top: 15px;
            height: 320px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .mood-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .mood-btn {
            flex: 1;
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
        }

        .mood-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .mood-btn.selected {
            border-color: var(--secondary);
            background: rgba(162, 155, 254, 0.2);
            box-shadow: 0 4px 15px rgba(162, 155, 254, 0.3);
        }

        .mood-btn i {
            font-size: 28px;
            margin-bottom: 10px;
            display: block;
        }

        .mood-btn span {
            display: block;
            font-size: 0.85rem;
            color: var(--text);
            opacity: 0.8;
            margin-top: 6px;
        }

        .action-plan {
            background: var(--card-bg);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--container-shadow);
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .action-plan h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            color: var(--text);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-plan h3 i {
            color: var(--primary);
            font-size: 18px;
        }

        .action-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .action-item:last-child {
            border-bottom: none;
        }

        .action-check {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
            transition: var(--transition);
            cursor: pointer;
        }

        .action-check.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .action-text h4 {
            margin-bottom: 4px;
            color: var(--text);
        }

        .action-text p {
            color: var(--text);
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .feedback-form {
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .feedback-form textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            resize: vertical;
            font-size: 0.9rem;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text);
            transition: var(--transition);
        }

        .feedback-form textarea:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(162, 155, 254, 0.2);
        }

        .feedback-form button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(255, 111, 145, 0.3);
        }

        .feedback-form button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 111, 145, 0.4);
        }

        footer {
            text-align: center;
            padding: 15px;
            font-size: 0.8rem;
            color: var(--text);
            opacity: 0.8;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .disclaimer {
            background: rgba(255, 118, 117, 0.1);
            border: 1px solid rgba(255, 118, 117, 0.2);
            border-radius: 12px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.85rem;
            color: var(--text);
            opacity: 0.8;
        }

        .emoji-burst {
            position: absolute;
            font-size: 20px;
            animation: emojiPop 1s ease forwards;
        }

        @keyframes emojiPop {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.5); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        .mascot {
            position: absolute;
            bottom: 80px;
            left: 20px;
            width: 60px;
            height: 60px;
            background: url("https://img.icons8.com/emoji/48/000000/smiling-face-with-heart-eyes.png") no-repeat center;
            background-size: contain;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .container, .auth-container {
                height: 100vh;
                border-radius: 0;
            }

            .sidebar {
                width: 60px;
            }

            .nav-item span {
                display: none;
            }

            .nav-item i {
                margin-right: 0;
                font-size: 22px;
            }

            .message {
                max-width: 85%;
            }

            .card-grid {
                grid-template-columns: 1fr;
            }

            .mood-selector {
                flex-direction: column;
            }

            .language-selector {
                font-size: 0.8rem;
                padding: 6px 8px;
            }

            .mascot {
                width: 40px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="auth-container" id="auth-container">
        <h2 class="auth-title">Welcome to MindAid Pro</h2>
        <div class="auth-form" id="login-form">
            <input type="email" id="login-email" placeholder="Email" required aria-label="Email">
            <input type="password" id="login-password" placeholder="Password" required aria-label="Password">
            <button id="login-btn">Login</button>
            <div class="auth-toggle" id="toggle-to-register">Don't have an account? Register</div>
        </div>
        <div class="auth-form" id="register-form" style="display: none;">
            <input type="email" id="register-email" placeholder="Email" required aria-label="Email">
            <input type="password" id="register-password" placeholder="Password" required aria-label="Password">
            <input type="password" id="confirm-password" placeholder="Confirm Password" required aria-label="Confirm Password">
            <button id="register-btn">Register</button>
            <div class="auth-toggle" id="toggle-to-login">Already have an account? Login</div>
        </div>
    </div>

    <div class="container" id="main-app" style="display: none;">
        <header>
            <div class="logo">
                <div class="logo-icon">
                    <i class="bx bx-heart"></i>
                </div>
                <div class="logo-text">
                    <h1>MindAid Pro</h1>
                    <div class="subtitle">Mental Health First Aid Assistant</div>
                </div>
            </div>
            <div class="user-controls">
                <select class="language-selector" id="language-selector" aria-label="Select Language">
                    <option value="english">English</option>
                    <option value="hinglish">Hinglish</option>
                    <option value="tanglish">Tanglish</option>
                </select>
                <button class="user-btn" title="Notifications" aria-label="Notifications">
                    <i class="bx bx-bell"></i>
                </button>
                <button class="user-btn" title="Settings" aria-label="Settings">
                    <i class="bx bx-cog"></i>
                </button>
                <button class="user-btn" title="User Profile" aria-label="User Profile">
                    <i class="bx bx-user"></i>
                </button>
                <button class="user-btn" id="logout-btn" title="Logout" aria-label="Logout">
                    <i class="bx bx-log-out"></i>
                </button>
            </div>
        </header>

        <div class="app-body">
            <nav class="sidebar">
                <a href="#" class="nav-item active" data-tab="chat" aria-label="Chat Support">
                    <i class="bx bx-message-dots"></i>
                    <span>Chat Support</span>
                </a>
                <a href="#" class="nav-item" data-tab="mood" aria-label="Mood Tracker">
                    <i class="bx bx-line-chart"></i>
                    <span>Mood Tracker</span>
                </a>
                <a href="#" class="nav-item" data-tab="resources" aria-label="Resources">
                    <i class="bx bx-book"></i>
                    <span>Resources</span>
                </a>
                <a href="#" class="nav-item" data-tab="plan" aria-label="Action Plan">
                    <i class="bx bx-task"></i>
                    <span>Action Plan</span>
                </a>
                <a href="#" class="nav-item" data-tab="emergency" aria-label="Emergency">
                    <i class="bx bx-shield"></i>
                    <span>Emergency</span>
                </a>
                <a href="#" class="nav-item" data-tab="feedback" aria-label="Feedback">
                    <i class="bx bx-comment"></i>
                    <span>Feedback</span>
                </a>
            </nav>

            <div class="main-content">
                <!-- Chat Support Tab -->
                <section class="tab-content active" id="chat-tab">
                    <h2 class="tab-title"><i class="bx bx-message-dots"></i> Mental Health Support</h2>
                    <div class="motivational">"You are stronger than you know, and every step counts! üåü"</div>
                    <p>Chat with MindAid to get immediate support, coping strategies, and resources tailored to your needs.</p>

                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message bot-message" id="initial-message">
                                <span class="message-time">Today, 02:38 PM</span>
                            </div>
                            <div class="quick-replies" id="quick-replies"></div>
                        </div>
                        <div class="mascot"></div>
                        <div class="input-container">
                            <input type="text" id="user-input" placeholder="Type your message here..." autocomplete="off" aria-label="Type your message">
                            <button class="chat-btn" id="send-btn" aria-label="Send Message">
                                <i class="bx bx-send"></i>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Mood Tracker Tab -->
                <section class="tab-content" id="mood-tab">
                    <h2 class="tab-title"><i class="bx bx-line-chart"></i> Mood Tracker</h2>
                    <div class="motivational">"Every day is a new opportunity to nurture your inner peace! üåà"</div>
                    <p>Track your emotional well-being over time to identify patterns and triggers.</p>

                    <div class="mood-selector">
                        <button class="mood-btn" data-mood="excellent" aria-label="Mood: Excellent">
                            <i class="bx bx-happy-alt"></i>
                            Excellent
                            <span>Feeling great!</span>
                        </button>
                        <button class="mood-btn" data-mood="good" aria-label="Mood: Good">
                            <i class="bx bx-smile"></i>
                            Good
                            <span>Pretty good day</span>
                        </button>
                        <button class="mood-btn" data-mood="neutral" aria-label="Mood: Neutral">
                            <i class="bx bx-meh"></i>
                            Neutral
                            <span>Just okay</span>
                        </button>
                        <button class="mood-btn" data-mood="poor" aria-label="Mood: Poor">
                            <i class="bx bx-sad"></i>
                            Poor
                            <span>Not feeling great</span>
                        </button>
                        <button class="mood-btn" data-mood="terrible" aria-label="Mood: Terrible">
                            <i class="bx bx-sad"></i>
                            Terrible
                            <span>Really struggling</span>
                        </button>
                    </div>

                    <div class="chart-container">
                        <canvas id="mood-chart" aria-label="Mood Chart"></canvas>
                    </div>
                </section>

                <!-- Resources Tab -->
                <section class="tab-content" id="resources-tab">
                    <h2 class="tab-title"><i class="bx bx-book"></i> Mental Health Resources</h2>
                    <div class="motivational">"You are never alone in your journey! ü§ù"</div>
                    <p>Access curated resources, tools, and professional support options.</p>

                    <div class="card-grid">
                        <div class="card">
                            <div class="card-header">
                                <i class="bx bx-support"></i>
                                Crisis Support
                            </div>
                            <div class="card-body">
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-phone"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Vandrevala Foundation</h3>
                                        <p>24/7 mental health helpline</p>
                                        <a href="#" aria-label="Call Vandrevala Foundation">Call 9999666555 <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-message"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>AASRA Suicide Prevention</h3>
                                        <p>24/7 crisis support</p>
                                        <a href="#" aria-label="Call AASRA Suicide Prevention">Call +91-9820466726 <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-globe"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>iCall Helpline</h3>
                                        <p>Psychological support by TISS</p>
                                        <a href="#" aria-label="Call iCall Helpline">Call +91-9152987821 <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <i class="bx bx-book-open"></i>
                                Self-Help Resources
                            </div>
                            <div class="card-body">
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-file"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>CBT Thought Diary</h3>
                                        <p>Track thoughts and challenge cognitive distortions</p>
                                        <a href="#" aria-label="Download CBT Thought Diary">Download Template <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-headphone"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Guided Meditations</h3>
                                        <p>Mindfulness and relaxation exercises</p>
                                        <a href="#" aria-label="Listen to Guided Meditations">Listen Now <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-video"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Mental Health Webinars</h3>
                                        <p>Free educational sessions from experts</p>
                                        <a href="#" aria-label="View Mental Health Webinars Schedule">View Schedule <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <i class="bx bx-health"></i>
                                Professional Help
                            </div>
                            <div class="card-body">
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-search"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Therapist Directory</h3>
                                        <p>Find licensed professionals near you</p>
                                        <a href="#" aria-label="Search Therapist Directory">Search Now <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-laptop"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Online Therapy</h3>
                                        <p>Connect with therapists remotely</p>
                                        <a href="#" aria-label="Start Online Therapy">Get Started <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-icon">
                                        <i class="bx bx-group"></i>
                                    </div>
                                    <div class="resource-content">
                                        <h3>Support Groups</h3>
                                        <p>Connect with others facing similar challenges</p>
                                        <a href="#" aria-label="Find Support Groups">Find Groups <i class="bx bx-right-arrow-alt"></i></a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Action Plan Tab -->
                <section class="tab-content" id="plan-tab">
                    <h2 class="tab-title"><i class="bx bx-task"></i> Personalized Action Plan</h2>
                    <div class="motivational">"Small steps today lead to big victories tomorrow! üöÄ"</div>
                    <p>Your step-by-step plan to improve mental wellness based on our conversations.</p>

                    <div class="action-plan">
                        <h3><i class="bx bx-task"></i> This Week's Goals</h3>
                        <div class="action-item">
                            <div class="action-check" aria-label="Mark as completed">
                                <i class="bx bx-check"></i>
                            </div>
                            <div class="action-text">
                                <h4>Practice deep breathing</h4>
                                <p>5 minutes of mindful breathing each morning</p>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-check" aria-label="Mark as completed">
                                <i class="bx bx-check"></i>
                            </div>
                            <div class="action-text">
                                <h4>Connect with a friend</h4>
                                <p>Reach out to someone you trust this week</p>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-check" aria-label="Mark as completed">
                                <i class="bx bx-check"></i>
                            </div>
                            <div class="action-text">
                                <h4>Physical activity</h4>
                                <p>20 minutes of movement at least 3 times this week</p>
                            </div>
                        </div>
                        <div class="action-item">
                            <div class="action-check" aria-label="Mark as completed">
                                <i class="bx bx-check"></i>
                            </div>
                            <div class="action-text">
                                <h4>Gratitude journal</h4>
                                <p>Write down 3 things you're grateful for each evening</p>
                            </div>
                        </div>
                    </div>

                    <div class="action-plan">
                        <h3><i class="bx bx-book-open"></i> Recommended Resources</h3>
                        <div class="resource-item">
                            <div class="resource-icon">
                                <i class="bx bx-book"></i>
                            </div>
                            <div class="resource-content">
                                <h3>"Feeling Good" by Dr. David Burns</h3>
                                <p>Cognitive behavioral therapy techniques for depression</p>
                            </div>
                        </div>
                        <div class="resource-item">
                            <div class="resource-icon">
                                <i class="bx bx-headphone"></i>
                            </div>
                            <div class="resource-content">
                                <h3>Anxiety Relief Meditation</h3>
                                <p>15-minute guided session for immediate calm</p>
                                <a href="#" aria-label="Listen to Anxiety Relief Meditation">Listen Now <i class="bx bx-right-arrow-alt"></i></a>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Emergency Tab -->
                <section class="tab-content" id="emergency-tab">
                    <h2 class="tab-title"><i class="bx bx-shield"></i> Emergency Support</h2>
                    <div class="motivational">"You are enough, and help is always available! üíñ"</div>
                    <p>Immediate resources and contacts for crisis situations.</p>

                    <div class="crisis-alert">
                        <h3>If you're in immediate danger:</h3>
                        <p>Call 112 or go to your nearest emergency room</p>
                    </div>

                    <div class="card-grid">
                        <div class="card">
                            <div class="card-header">
                                <i class="bx bx-phone"></i>
                                Emergency Contacts
                            </div>
                            <div class="card-body">
                                <div class="resource-item">
                                    <div class="resource-content">
                                        <h3>Vandrevala Foundation</h3>
                                        <p>Call 9999666555</p>
                                        <a href="#" aria-label="Visit Vandrevala Foundation">vandrevalafoundation.com</a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-content">
                                        <h3>AASRA Suicide Prevention</h3>
                                        <p>Call +91-9820466726</p>
                                        <a href="#" aria-label="Visit AASRA">aasra.info</a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-content">
                                        <h3>iCall Helpline</h3>
                                        <p>Call +91-9152987821</p>
                                        <a href="#" aria-label="Visit iCall Helpline">icallhelpline.org</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <i class="bx bx-globe"></i>
                                Additional Resources
                            </div>
                            <div class="card-body">
                                <div class="resource-item">
                                    <div class="resource-content">
                                        <h3>Sangath</h3>
                                        <p>Mental health support services</p>
                                        <a href="#" aria-label="Visit Sangath">sangath.in</a>
                                    </div>
                                </div>
                                <div class="resource-item">
                                    <div class="resource-content">
                                        <h3>Mpower Helpline</h3>
                                        <p>Call 1800-120-820050</p>
                                        <a href="#" aria-label="Visit Mpower">mpower.org.in</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="disclaimer">
                        <p><strong>Important:</strong> MindAid is not a substitute for professional mental health care. In crisis situations, please contact emergency services or a crisis hotline immediately.</p>
                    </div>
                </section>

                <!-- Feedback Tab -->
                <section class="tab-content" id="feedback-tab">
                    <h2 class="tab-title"><i class="bx bx-comment"></i> Feedback</h2>
                    <div class="motivational">"Your feedback helps us grow and serve you better! üìù"</div>
                    <p>We value your input to improve MindAid Pro. Please share your thoughts below.</p>

                    <div class="feedback-form">
                        <textarea id="feedback-text" placeholder="Share your feedback or suggestions..." required aria-label="Feedback"></textarea>
                        <button id="feedback-btn" aria-label="Submit Feedback">Submit Feedback</button>
                    </div>
                </section>
            </div>
        </div>

        <footer>
            <p>MindAid Pro - Mental Health First Aid Assistant | This is a demonstration project only</p>
            <p>Note: Conversations are not stored or monitored. In real crisis situations, please contact professionals immediately.</p>
        </footer>
    </div>

    <script>
        (function () {
            // State Management
            let state = {
                isAuthenticated: false,
                currentUser: null,
                currentLanguage: localStorage.getItem("language") || "english",
                users: JSON.parse(localStorage.getItem("users")) || {},
                moodData: JSON.parse(localStorage.getItem("moodData")) || {},
                moodChart: null,
            };

            // Language Data
           const languageData = {
    english: {
        initialMessages: [
            "Hi there! I‚Äôm MindAid, your mental health companion. üåü It‚Äôs 10:28 PM‚Äîpretty late! How are you holding up tonight?",
            "You can share anything on your mind, whether by typing or using the quick options. What‚Äôs going on?",
        ],
        quickReplies: [
            { text: "I‚Äôm feeling anxious right now üò∞", value: "anxiety" },
            { text: "I‚Äôve been feeling depressed lately üòî", value: "depression" },
            { text: "I‚Äôm overwhelmed by stress üò•", value: "stress" },
            { text: "I need some healthy coping ideas", value: "coping" },
        ],
        crisisResponse: "I‚Äôm really worried about you‚Äîyou‚Äôre not alone, especially this late at night. Would you like me to share some support resources you can reach out to?",
        copingStrategies: {
            anxiety: [
                "It‚Äôs late, so let‚Äôs try box breathing to calm your mind: inhale for 4 seconds, hold for 4, exhale for 4, pause for 4. Repeat until you feel calmer. üå¨Ô∏è Ready to give it a go?",
                "Let‚Äôs ground ourselves with the 5-4-3-2-1 method: name 5 things you see, 4 you can touch, 3 you hear, 2 you smell, and 1 you taste. It helps ease anxious thoughts. üëÄ Want to try?",
                "A short walk outside, even just around your place, can lower stress hormones by up to 15%. Maybe some fresh night air could help? üå≥",
                "Writing down your worries for 5 minutes can help clear your mind before bed. Want a prompt to start with? üìù",
            ],
            depression: [
                "Connecting with someone you trust can really help, even with a quick call or message. Who could you reach out to tonight? üìû",
                "Let‚Äôs do something small you enjoy, like listening to a favorite song or sketching for 5 minutes. What sounds good? üé∂",
                "Try saying something kind to yourself, like ‚ÄòI‚Äôm doing my best, and that‚Äôs enough.‚Äô How does that feel? üíñ",
                "Small wins matter. How about making a warm drink to relax before bed? ‚òï",
            ],
            stress: [
                "Let‚Äôs break things down‚Äîwhat‚Äôs one thing that‚Äôs stressing you out the most right now? We can tackle it together. üìã",
                "Progressive muscle relaxation can help you unwind before sleep. Want to try tensing and releasing each muscle group? ü§∏",
                "A ‚Äòdone list‚Äô can make you feel accomplished. What are 3 things you‚Äôve done today, even small ones? ‚úÖ",
                "Chamomile tea can help you relax at this hour‚Äîit‚Äôs calming and sleep-friendly. Want to give it a try? üçµ",
            ],
            sleep: [
                "Since it‚Äôs 10:28 PM, let‚Äôs set up a calming routine‚Äîmaybe read a few pages or sip warm milk? üìñ What time do you want to sleep?",
                "A cooler bedroom (around 60-67¬∞F) can help you fall asleep faster by supporting melatonin production. üõå",
                "Caffeine can linger in your system for 6 hours‚Äîdid you have any this evening that might be keeping you up? ‚òï",
                "Soft nature sounds, like rain or waves, can help you drift off. Want a recommendation for a calming track? üé∂",
            ],
            relationships: [
                "Active listening can make a big difference‚Äîtry reflecting back what you hear to show you care. Want to practice? üëÇ",
                "Use ‚ÄòI feel‚Ä¶ when‚Ä¶ because‚Ä¶‚Äô to share your emotions clearly. Let‚Äôs try it with something on your mind. üí¨",
                "Spending quality time, like sharing a late-night snack, can strengthen bonds. Could you plan something small? üçΩÔ∏è",
                "Resolving conflicts quickly can ease tension‚Äîhow can we address what‚Äôs bothering you tonight? ü§ù",
            ],
        },
        responses: {
            anxiety: "I can tell you‚Äôre feeling anxious, which must be tough this late at night. Let‚Äôs try a grounding technique to help you relax‚Äîsound good? üåà",
            depression: "I‚Äôm sorry you‚Äôre feeling depressed‚Äîit can be so heavy. Let‚Äôs take it slow and find one small thing to help tonight. üí°",
            stress: "Stress can feel overwhelming, especially at this hour. What‚Äôs been the biggest pressure for you today? Let‚Äôs work through it. ü§ó",
            sleep: "Struggling to sleep at 10:28 PM isn‚Äôt easy. Would you like some strategies to help you wind down? üåô",
            relationships: "Relationships can really affect how we feel. What‚Äôs been going on that you‚Äôd like to talk about? üíû",
            coping: "Based on what you‚Äôve shared, here are some strategies that might help you tonight: ‚ú®",
            thanks: "I‚Äôm so glad I could help! You‚Äôre doing great reaching out‚Äîwant to keep exploring? üåü",
            thanksFollowUp: "I can share more ideas or resources if you‚Äôd like. What‚Äôs next for you? üìö",
            generic: [
                "Thanks for sharing‚ÄîI‚Äôm here for you. How‚Äôs this affecting your evening? ü§î",
                "I‚Äôm listening closely. What else should I know about how you‚Äôre feeling tonight? üó£Ô∏è",
                "Let‚Äôs focus on what‚Äôs most important to you right now, especially this late. üëÇ",
                "That sounds like a lot to handle. What would feel helpful for you tonight? üí≠",
                "Let‚Äôs find a small step you can take before bed‚Äîwhat feels manageable? üöÄ",
            ],
            positiveSentiment: [
                "You sound a bit brighter‚Äîthat‚Äôs so great to hear! What‚Äôs lifting your spirits tonight? üòä",
                "I‚Äôm picking up some positive vibes‚Äîlove that! What‚Äôs been going well for you at this hour? ü•≥",
            ],
            negativeSentiment: {
                mild: "I can sense you‚Äôre not feeling your best tonight‚ÄîI‚Äôm here to help. Want to talk more? ü•∞",
                severe: "I‚Äôm really sorry you‚Äôre feeling this way‚Äîit sounds so tough. Let‚Äôs find a way to ease things for you. ü§ó",
            },
            followUp: {
                anxiety: "Did that help calm your anxiety a bit, or should we try something else to relax tonight?",
                depression: "How are you feeling now‚Äîany better? Want to try another small step to lift your mood?",
                stress: "Is the stress feeling more manageable, or do you want to try another way to unwind before bed?",
                sleep: "Are you feeling sleepier now, or do you need more ideas to help you rest?",
                relationships: "Did that help at all, or would you like to talk more about what‚Äôs going on?",
                generic: "How are you doing now? I‚Äôm here if you want to chat more or try something new. üòä",
            },
            proactive: {
                anxiety: "I‚Äôve noticed you‚Äôve mentioned anxiety before‚Äîwould you like to try a new technique tonight?",
                depression: "You‚Äôve seemed down lately‚Äîlet‚Äôs find something to help you feel a bit better before bed.",
                stress: "Stress has been coming up for you recently‚Äîwant to try a new way to relax at this hour?",
                sleep: "I remember you‚Äôve had trouble sleeping before‚Äîshall we try something to help you tonight?",
                relationships: "You‚Äôve mentioned relationship challenges before‚Äîwould you like to talk more about it now?",
            },
        },
    },
    hinglish: {
        initialMessages: [
            "Namaste! Main hoon MindAid, tera mental health dost. üå∏ Raat ke 10:28 ho gaye hain‚Äîtu kaisa hai abhi?",
            "Yahan dil khol ke baat kar sakta hai‚Äîtype karega ya quick options se shuru karega?",
        ],
        quickReplies: [
            { text: "Abhi anxiety ho rahi hai üò∞", value: "anxiety" },
            { text: "Udaas feel kar raha hoon üòî", value: "depression" },
            { text: "Bohot stress mein hoon üò•", value: "stress" },
            { text: "Coping ke liye ideas chahiye", value: "coping" },
        ],
        crisisResponse: "Mujhe lagta hai tu mushkil mein hai‚Äîtu akela nahi hai, yaar. Main professional help ke options bata doon?",
        copingStrategies: {
            anxiety: [
                "Raat ho gayi hai, toh box breathing try karein: 4 second saans le, 4 hold, 4 chhod, 4 pause. Repeat kar‚Äîthoda relax hoga. üå¨Ô∏è Shuru karein?",
                "5-4-3-2-1 se dimag shant karte hain: 5 cheezein dekh, 4 chhu, 3 sun, 2 smell kar, 1 taste kar. Yeh anxiety kam karega. üëÄ Try karein?",
                "Thoda ghar ke bahar raat ki hawa mein ghoom aaye‚Äîstress hormones 15% tak kam ho sakte hain. Chalega? üå≥",
                "5 minute ke liye apni chinta likh‚Äîsone se pehle dimag halka hoga. Topic chahiye? üìù",
            ],
            depression: [
                "Kisi dost ya gharwale se baat kar‚Äîek chhota sa call ya message bhi mood thik kar sakta hai. Kisse baat karega? üìû",
                "Kuch pasand ka kar‚Äîjaise 5 minute ke liye gaana sun ya drawing kar. Kya achha lagega? üé∂",
                "Khud se pyar wali baat bol: ‚ÄòMain apna best kar raha hoon, aur yeh kaafi hai.‚Äô Kaisa laga? üíñ",
                "Chhoti si jeet bhi badi hoti hai‚Äîraat ke liye garam doodh banayein? ‚òï",
            ],
            stress: [
                "Sabse bada stress kya de raha hai‚Äîusko chhote steps mein baant lete hain. Kya bolta hai? üìã",
                "Muscle relaxation se body ko aaram do‚Äîhar muscle ko tense aur release karte hain. Try karein? ü§∏",
                "‚ÄòDone list‚Äô banayein‚Äî3 cheezein likho jo tune aaj kiya, chhoti hi sahi. Kya likhega? ‚úÖ",
                "Chamomile chai raat ke liye perfect hai‚Äîtension kam karegi. Pi lega? üçµ",
            ],
            sleep: [
                "Ab 10:28 ho gaye hain‚Äîek relaxing routine banayein, jaise kitab padhein ya garam doodh piyein. Kab soega? üìñ",
                "Thanda kamra (16-20¬∞C) neend ke liye behtar hai‚Äîmelatonin production badhega. üõå",
                "Caffeine 6 ghante tak body mein rehta hai‚Äîshaam ko piya tha kya jo neend affect kar raha hai? ‚òï",
                "Barish ya samundar ki awaaz sone mein madad kar sakti hai‚Äîkoi track suggest karoon? üé∂",
            ],
            relationships: [
                "Active listening se rishte behtar hote hain‚Äîjo sune, usko repeat karke confirm karo. Practice karein? üëÇ",
                "‚ÄòMujhe aisa lagta hai jab‚Ä¶ kyunki‚Ä¶‚Äô se apni baat clear bolo. Kisi baat pe try karein? üí¨",
                "Raat ka khana saath mein kha sakte ho‚Äîrishte majboot honge. Plan karein? üçΩÔ∏è",
                "Jhagda jaldi solve karna better hai‚Äîiss baat ko kaise handle karein? ü§ù",
            ],
        },
        responses: {
            anxiety: "Teri anxiety samajh raha hoon‚Äîraat mein yeh aur tough lagta hai. Kuch grounding techniques try karein? üåà",
            depression: "Udaasi bohot bhari hoti hai‚Äîmujhe afsos hai. Aaj raat ek chhoti si cheez se shuru karein? üí°",
            stress: "Stress raat ke waqt aur bhi zyada lagta hai. Sabse bada pressure kya hai‚Äîbaat karein? ü§ó",
            sleep: "10:28 PM pe neend na aaye toh mushkil hai. Sone ke liye kuch tips try karein? üåô",
            relationships: "Rishton ka asar bohot hota hai dil pe. Kya chal raha hai‚Äîbata mujhe? üíû",
            coping: "Jo tune bataya, uske hisab se yeh ideas raat ke liye kaam kar sakte hain: ‚ú®",
            thanks: "Tune baat share ki‚Äîbohot acha kiya! Aur kuch explore karein? üåü",
            thanksFollowUp: "Aur ideas ya resources dekhna hai kya‚Äîkya chahiye? üìö",
            generic: [
                "Baat batane ke liye shukriya‚Äîiss se teri raat pe kya asar pada? ü§î",
                "Main dhyan se sun raha hoon‚Äîaur kya batana chahiye mujhe? üó£Ô∏è",
                "Abhi raat mein kya sabse zyada matter kar raha hai tujhe? üëÇ",
                "Yeh thoda heavy lag raha hai‚Äîraat ke liye kya help chahiye? üí≠",
                "Raat ke liye ek chhota step plan karein‚Äîkya theek lagega? üöÄ",
            ],
            positiveSentiment: [
                "Tu thoda khush lag raha hai‚Äîbohot acha hai! Raat ko kya tujhe khushi de raha hai? üòä",
                "Achhe vibes aa rahe hain‚Äîmast hai! Is waqt kya acha chal raha hai? ü•≥",
            ],
            negativeSentiment: {
                mild: "Raat mein tu thoda down lag raha hai‚Äîmain hoon na, baat karein? ü•∞",
                severe: "Bohot pareshan hai tu‚Äîmujhe bura lag raha hai. Raat ke liye kuch karte hain? ü§ó",
            },
            followUp: {
                anxiety: "Abhi thoda relax hua kya, ya raat ke liye kuch aur try karein?",
                depression: "Mood thoda better hua kya, ya aur kuch karna hai aaj raat?",
                stress: "Stress kam hua kya, ya sone se pehle kuch aur try karein?",
                sleep: "Ab neend aa rahi hai kya, ya aur tips chahiye sone ke liye?",
                relationships: "Kuch farak pada kya, ya aur baat karni hai iske bare mein?",
                generic: "Ab kaisa lag raha hai? Aur baat karni hai ya kuch naya try karna hai? üòä",
            },
            proactive: {
                anxiety: "Pehle bhi anxiety ki baat ki thi na‚Äîraat ke liye kuch naya try karein?",
                depression: "Pehle bhi udaas laga tha‚Äîraat ke liye mood thik karne ka idea doon?",
                stress: "Stress pehle bhi bola tha‚Äîabhi raat mein relax karne ka naya idea try karein?",
                sleep: "Pehle bhi neend ki baat ki thi‚Äîabhi sone ke liye kuch aur try karein?",
                relationships: "Rishton ke bare mein pehle bhi bola tha‚Äîabhi baat karein ya kuch karna hai?",
            },
        },
    },
    tanglish: {
        initialMessages: [
            "Vanakkam! Naan MindAid, un mental health dostu. üòä Ippo raathiri 10:28 aagudhu‚Äînee eppadi irukke?",
            "Inga open-ah pesalam‚Äîtype pannuviya illa quick options use pannuviya?",
        ],
        quickReplies: [
            { text: "Ippo anxiety aagudhu üò∞", value: "anxiety" },
            { text: "Manasu downa irukku üòî", value: "depression" },
            { text: "Romba stress aa irukku üò•", value: "stress" },
            { text: "Coping ideas venum", value: "coping" },
        ],
        crisisResponse: "Ungalukku kashtama irukku nu puriyudhu‚Äînee thaniya illa da. Professional help options connect pannava?",
        copingStrategies: {
            anxiety: [
                "Raathiri aagiduchu, box breathing pannuvom: 4 seconds saans edu, 4 hold, 4 vidu, 4 pause. Repeat pannu‚Äîrelax aagum. üå¨Ô∏è Start pannalama?",
                "5-4-3-2-1 method try pannu: 5 paakuren, 4 thotturen, 3 ketkuren, 2 smell pannuren, 1 taste pannuren. Anxiety kammi aagum. üëÄ Pannuviya?",
                "Veedu pakkathula raathiri hawa-la nadanthu vaa‚Äîstress hormones 15% kammi aagum. Try pannuviya? üå≥",
                "5 minute ezhuthi paaru‚Äîthoongaradhukku munna mind clear aagum. Topic venuma? üìù",
            ],
            depression: [
                "Nambikkai ulla friend-a illa family-a konjam pesu‚Äîchumma message pannina kooda mood maaraum. Yaarukku message pannuviya? üìû",
                "Unakku pudicha 5 minute activity pannu‚Äîpaattu kekkuriaya illa drawing pannuviya? Enna pannalam? üé∂",
                "Nee unna ‚ÄòNaan try pannuren, adhu podhum‚Äô nu sollunga. Eppadi irukku? üíñ",
                "Chinna vishayam pannuvom‚Äîraathiri paal heat pannuviya? ‚òï",
            ],
            stress: [
                "Enna stress romba irukku‚Äîadha chinnachinna steps-a pannuvom. Enna pannalam? üìã",
                "Muscle relaxation pannina body relax aagum‚Äîmuscles-a tense pannitu release pannuvom. Try pannuviya? ü§∏",
                "‚ÄòDone list‚Äô ezhuthuvom‚Äî3 vishayam innaiku pannirukke, ezhuthu paakalam. Enna ezhuthuviya? ‚úÖ",
                "Chamomile tea raathiri nalla irukum‚Äîtension kammi aagum. Kudichu paakuriaya? üçµ",
            ],
            sleep: [
                "Ippo 10:28 aagudhu‚Äîcalming routine pannuvom, paal kudichu illa book padichu thoonguviya? Eppadi thoonguviya? üìñ",
                "Cool room (16-20¬∞C) thoongarathukku help pannum‚Äîmelatonin production perugum. üõå",
                "Caffeine 6 hours body-la irukum‚Äîevening coffee/tea affect pannudhuya? ‚òï",
                "Western Ghats rain sound kettu thoongalam‚Äîthoongarathukku help aagum. Track venuma? üé∂",
            ],
            relationships: [
                "Active listening pannina rishte nalla irukum‚Äîketta pinadi repeat panni confirm pannu. Practice pannuviya? üëÇ",
                "‚ÄòEnakku ippadi thonudhu appadiyae‚Ä¶‚Äô nu solli clear-a pesuvom. Try pannuviya? üí¨",
                "Raathiri sapadu saathu saapidalam‚Äîrelationship strong aagum. Plan pannuviya? üçΩÔ∏è",
                "Jhagda jaldi solve pannina nalladhu‚Äîidha eppadi handle pannalam? ü§ù",
            ],
        },
        responses: {
            anxiety: "Raathiri anxiety aagudhu nu puriyudhu‚Äîkashtama irukum. Grounding techniques pannuvoma? üåà",
            depression: "Manasu downa irukku‚Äîadhu heavy-a irukum da. Innaiku raathiri konjam help pannuvoma? üí°",
            stress: "Stress raathiri romba feel aagum‚Äîenna main pressure, pesuvoma? ü§ó",
            sleep: "10:28 PM aagiduchu‚Äîthoongaradhu kashtam. Thoongarathukku tips try pannuviya? üåô",
            relationships: "Rishte manasula romba impact pannum‚Äîenna nadakkudhu, sollu paakalam? üíû",
            coping: "Nee solradha paatha, intha ideas raathiri unakku help pannum: ‚ú®",
            thanks: "Nee share pannirukke‚Äîromba nalladhu! Innum explore pannuviya? üåü",
            thanksFollowUp: "Innum ideas illa resources paaklama‚Äîenna venum? üìö",
            generic: [
                "Share pannirukke, nandri‚Äîidhu un raathiri eppadi affect pannudhu? ü§î",
                "Naan ketkuren‚Äîinnum enna purinjukka venum? üó£Ô∏è",
                "Raathiri unakku enna mukkiyam aagudhu? üëÇ",
                "Idhu konjam kashtama irukku‚Äîraathiri enna help venum? üí≠",
                "Raathiri konjam plan pannuvom‚Äîenna pannuviya? üöÄ",
            ],
            positiveSentiment: [
                "Nee konjam happy-a irukke‚Äîsuper da! Raathiri enna unakku santhoshama irukku? üòä",
                "Nalla vibe-a irukke‚Äîmast! Ippo enna nalladhu nadakkudhu? ü•≥",
            ],
            negativeSentiment: {
                mild: "Raathiri konjam down-a irukke‚Äînaan irukken, pesuvoma? ü•∞",
                severe: "Romba kashtama irukku nu puriyudhu‚Äîsorry da. Raathiri konjam help pannuvoma? ü§ó",
            },
            followUp: {
                anxiety: "Ippo anxiety konjam kammi aacha, illa raathiri vera pannuvoma?",
                depression: "Mood konjam maariyacha, illa innaiku raathiri vera pannuvoma?",
                stress: "Stress kammi aacha, illa thoongaradhukku munna vera try pannuvoma?",
                sleep: "Ippo thoongalam nu thonudha, illa innum tips venuma?",
                relationships: "Idhu help pannucha, illa innum pesanuma idhpathi?",
                generic: "Ippo eppadi irukke? Innum pesanuma illa vera pannanuma? üòä",
            },
            proactive: {
                anxiety: "Munnadiyum anxiety pathi sonniya‚Äîraathiri konjam vera try pannuvoma?",
                depression: "Munnadiyum manasu down-nu sonniya‚Äîraathiri mood maara idea venuma?",
                stress: "Munnadiyum stress pathi sonniya‚Äîraathiri relax pannurathukku idea paaklama?",
                sleep: "Munnadiyum thoongala nu sonniya‚Äîippo thoongarathukku help pannuvoma?",
                relationships: "Munnadiyum rishte pathi sonniya‚Äîippo pesanuma illa vera pannanuma?",
            },
        },
    },
};

            // Crisis Detection
            const crisisConfig = {
                keywords: [
                    "suicide",
                    "kill myself",
                    "end my life",
                    "want to die",
                    "harm myself",
                    "self-harm",
                    "hopeless",
                    "no point",
                    "give up",
                    "cannot go on",
                    "worthless",
                ],
                resources: [
                    "Vandrevala Foundation: <strong>Call 9999666555</strong>",
                    "AASRA Suicide Prevention: <strong>Call +91-9820466726</strong>",
                    "iCall Helpline: <strong>Call +91-9152987821</strong>",
                    "Mpower Emergency: <strong>Call 1800-120-820050</strong>",
                    "Emergency Services: <strong>112</strong>",
                ],
            };

            // Utility Functions
            const utils = {
                formatTime: (date) =>
                    date.toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }),
                triggerConfetti: () =>
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ["#ff6f91", "#a29bfe", "#feca57"],
                    }),
                triggerEmojiBurst: (container, emojis) => {
                    for (let i = 0; i < 5; i++) {
                        const emoji = document.createElement("span");
                        emoji.classList.add("emoji-burst");
                        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];
                        emoji.style.left = `${Math.random() * 100}%`;
                        emoji.style.top = `${Math.random() * 100}%`;
                        container.appendChild(emoji);
                    }
                },
                addMessage: (text, isUser = false) => {
                    const messageDiv = document.createElement("div");
                    messageDiv.classList.add("message", isUser ? "user-message" : "bot-message");
                    const now = new Date();
                    messageDiv.innerHTML = `${text}<span class="message-time">${utils.formatTime(now)}</span>`;
                    elements.chatContainer.appendChild(messageDiv);
                    elements.chatContainer.scrollTop = elements.chatContainer.scrollHeight;
                },
                showTyping: () => {
                    const typingDiv = document.createElement("div");
                    typingDiv.classList.add("typing-indicator");
                    typingDiv.id = "typing-indicator";
                    typingDiv.innerHTML = `
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                        <span class="typing-dot"></span>
                    `;
                    elements.chatContainer.appendChild(typingDiv);
                    elements.chatContainer.scrollTop = elements.chatContainer.scrollHeight;
                    return typingDiv;
                },
                hideTyping: () => {
                    const typingIndicator = document.getElementById("typing-indicator");
                    if (typingIndicator) typingIndicator.remove();
                },
            };

            // DOM Elements
            const elements = {
                authContainer: document.getElementById("auth-container"),
                mainApp: document.getElementById("main-app"),
                loginForm: document.getElementById("login-form"),
                registerForm: document.getElementById("register-form"),
                toggleToRegister: document.getElementById("toggle-to-register"),
                toggleToLogin: document.getElementById("toggle-to-login"),
                logoutBtn: document.getElementById("logout-btn"),
                languageSelector: document.getElementById("language-selector"),
                chatContainer: document.getElementById("chat-messages"),
                quickRepliesContainer: document.getElementById("quick-replies"),
                userInput: document.getElementById("user-input"),
                sendBtn: document.getElementById("send-btn"),
                tabLinks: document.querySelectorAll(".nav-item"),
                tabContents: document.querySelectorAll(".tab-content"),
                moodButtons: document.querySelectorAll(".mood-btn"),
                actionChecks: document.querySelectorAll(".action-check"),
                feedbackBtn: document.getElementById("feedback-btn"),
                feedbackText: document.getElementById("feedback-text"),
            };

            // Authentication
            const auth = {
                initialize: () => {
                    if (localStorage.getItem("currentUser")) {
                        state.isAuthenticated = true;
                        state.currentUser = localStorage.getItem("currentUser");
                        elements.authContainer.style.display = "none";
                        elements.mainApp.style.display = "flex";
                        utils.triggerConfetti();
                        app.initializeMoodChart();
                        app.updateChatLanguage();
                    }
                },
                login: () => {
                    const email = document.getElementById("login-email").value;
                    const password = document.getElementById("login-password").value;
                    if (state.users[email] && state.users[email].password === password) {
                        state.isAuthenticated = true;
                        state.currentUser = email;
                        localStorage.setItem("currentUser", email);
                        elements.authContainer.style.display = "none";
                        elements.mainApp.style.display = "flex";
                        app.initializeMoodChart();
                        app.updateChatLanguage();
                        utils.triggerConfetti();
                    } else {
                        alert("Invalid email or password!");
                    }
                },
                register: () => {
                    const email = document.getElementById("register-email").value;
                    const password = document.getElementById("register-password").value;
                    const confirmPassword = document.getElementById("confirm-password").value;
                    if (password !== confirmPassword) {
                        alert("Passwords do not match!");
                        return;
                    }
                    if (state.users[email]) {
                        alert("User already exists!");
                        return;
                    }
                    state.users[email] = { password, moods: [] };
                    localStorage.setItem("users", JSON.stringify(state.users));
                    alert("Registration successful! Please login.");
                    elements.loginForm.style.display = "flex";
                    elements.registerForm.style.display = "none";
                },
                logout: () => {
                    state.isAuthenticated = false;
                    state.currentUser = null;
                    localStorage.removeItem("currentUser");
                    elements.authContainer.style.display = "flex";
                    elements.mainApp.style.display = "none";
                    elements.loginForm.style.display = "flex";
                    elements.registerForm.style.display = "none";
                },
            };

            // Main App Logic
            const app = {
                initializeMoodChart: () => {
                    const moodCtx = document.getElementById("mood-chart").getContext("2d");
                    const userMoods = state.moodData[state.currentUser] || [];
                    const labels = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];
                    const data = Array(7).fill(null);

                    userMoods.forEach((mood) => {
                        const date = new Date(mood.date);
                        const dayIndex = date.getDay() === 0 ? 6 : date.getDay() - 1;
                        data[dayIndex] = mood.value;
                    });

                    state.moodChart = new Chart(moodCtx, {
                        type: "line",
                        data: {
                            labels,
                            datasets: [
                                {
                                    label: "Mood Level",
                                    data,
                                    borderColor: "#ff6f91",
                                    backgroundColor: "rgba(255, 111, 145, 0.1)",
                                    borderWidth: 3,
                                    pointRadius: 6,
                                    pointBackgroundColor: "#ff6f91",
                                    tension: 0.3,
                                    fill: true,
                                },
                            ],
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            scales: {
                                y: {
                                    min: 1,
                                    max: 5,
                                    ticks: {
                                        callback: (value) => {
                                            const moods = ["Terrible", "Poor", "Neutral", "Good", "Excellent"];
                                            return moods[value - 1];
                                        },
                                    },
                                },
                            },
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: (context) => {
                                            const moods = ["Terrible", "Poor", "Neutral", "Good", "Excellent"];
                                            return context.parsed.y ? moods[context.parsed.y - 1] : "No data";
                                        },
                                    },
                                },
                            },
                        },
                    });
                },
                updateChatLanguage: () => {
                    const lang = languageData[state.currentLanguage];
                    elements.quickRepliesContainer.innerHTML = "";
                    lang.quickReplies.forEach((reply) => {
                        const button = document.createElement("button");
                        button.classList.add("quick-reply");
                        button.setAttribute("data-reply", reply.value);
                        button.textContent = reply.text;
                        button.setAttribute("aria-label", reply.text);
                        elements.quickRepliesContainer.appendChild(button);
                    });

                    const initialMessageDiv = document.getElementById("initial-message");
                    const now = new Date();
                    initialMessageDiv.innerHTML = `${lang.initialMessages[0]}<span class="message-time">${utils.formatTime(now)}</span>`;

                    document.querySelectorAll(".quick-reply").forEach((button) => {
                        button.addEventListener("click", function () {
                            const reply = this.getAttribute("data-reply");
                            utils.addMessage(this.textContent, true);
                            const typingIndicator = utils.showTyping();
                            chat.generateResponse(reply);
                            utils.triggerEmojiBurst(elements.chatContainer, ["üòä", "üåü", "üíñ"]);
                        });
                    });
                },
            };

            // Chat Logic
            const chat = {
                generateResponse: (userMessage) => {
                    const lowerMsg = userMessage.toLowerCase();
                    const lang = languageData[state.currentLanguage];
                    const hasCrisis = crisisConfig.keywords.some((keyword) => lowerMsg.includes(keyword));

                    if (hasCrisis) {
                        setTimeout(() => {
                            utils.hideTyping();
                            const alertDiv = document.createElement("div");
                            alertDiv.classList.add("crisis-alert");
                            alertDiv.innerHTML = `
                                <strong>‚ö†Ô∏è Crisis Detected</strong><br>
                                Your message suggests you might be in crisis. Please reach out to these resources immediately:
                            `;
                            const resourcesDiv = document.createElement("div");
                            resourcesDiv.classList.add("resources-card");
                            resourcesDiv.innerHTML = crisisConfig.resources.join("<br />");
                            elements.chatContainer.appendChild(alertDiv);
                            elements.chatContainer.appendChild(resourcesDiv);
                            elements.chatContainer.scrollTop = elements.chatContainer.scrollHeight;

                            setTimeout(() => {
                                utils.addMessage(lang.crisisResponse);
                            }, 1000);
                        }, 1500);
                        return;
                    }

                    setTimeout(() => {
                        utils.hideTyping();
                        if (lowerMsg.includes("anxious") || lowerMsg.includes("ghabrahat") || lowerMsg.includes("bayama")) {
                            utils.addMessage(lang.responses.anxiety);
                            chat.sendCopingTips(lang.copingStrategies.anxiety, lang.responses);
                        } else if (lowerMsg.includes("low") || lowerMsg.includes("udaas") || lowerMsg.includes("downa")) {
                            utils.addMessage(lang.responses.depression);
                            chat.sendCopingTips(lang.copingStrategies.depression, lang.responses);
                        } else if (lowerMsg.includes("stress") || lowerMsg.includes("tension") || lowerMsg.includes("pressure")) {
                            utils.addMessage(lang.responses.stress);
                            chat.sendCopingTips(lang.copingStrategies.stress, lang.responses);
                        } else if (lowerMsg.includes("sleep") || lowerMsg.includes("neend") || lowerMsg.includes("thoongala")) {
                            utils.addMessage(lang.responses.sleep);
                            chat.sendCopingTips(lang.copingStrategies.sleep, lang.responses);
                        } else if (lowerMsg.includes("relationship") || lowerMsg.includes("rishton") || lowerMsg.includes("vishayam")) {
                            utils.addMessage(lang.responses.relationships);
                            chat.sendCopingTips(lang.copingStrategies.relationships, lang.responses);
                        } else if (lowerMsg.includes("coping") || lowerMsg.includes("tips") || lowerMsg.includes("venum")) {
                            utils.addMessage(lang.responses.coping);
                            const allTips = Object.values(lang.copingStrategies).flat();
                            const randomTips = allTips.sort(() => 0.5 - Math.random()).slice(0, 4);
                            chat.sendCopingTips(randomTips, lang.responses);
                        } else {
                            const randomResponse = lang.responses.generic[Math.floor(Math.random() * lang.responses.generic.length)];
                            utils.addMessage(randomResponse);
                        }
                    }, 1500);
                },
                sendCopingTips: (tips, responses) => {
                    tips.forEach((tip, index) => {
                        setTimeout(() => {
                            utils.addMessage(tip);
                            if (index === tips.length - 1) {
                                setTimeout(() => {
                                    utils.addMessage(responses.thanks);
                                    setTimeout(() => {
                                        utils.addMessage(responses.thanksFollowUp);
                                    }, 1000);
                                }, 1000);
                            }
                        }, index * 1000);
                    });
                },
            };

            // Event Listeners
            const setupEventListeners = () => {
                elements.toggleToRegister.addEventListener("click", () => {
                    elements.loginForm.style.display = "none";
                    elements.registerForm.style.display = "flex";
                });

                elements.toggleToLogin.addEventListener("click", () => {
                    elements.loginForm.style.display = "flex";
                    elements.registerForm.style.display = "none";
                });

                document.getElementById("register-btn").addEventListener("click", auth.register);
                document.getElementById("login-btn").addEventListener("click", auth.login);
                elements.logoutBtn.addEventListener("click", auth.logout);

                elements.languageSelector.addEventListener("change", () => {
                    state.currentLanguage = elements.languageSelector.value;
                    localStorage.setItem("language", state.currentLanguage);
                    app.updateChatLanguage();
                });

                elements.tabLinks.forEach((link) => {
                    link.addEventListener("click", (e) => {
                        e.preventDefault();
                        if (link.getAttribute("data-tab") === "mood" && !state.isAuthenticated) {
                            alert("Please login to access the Mood Tracker");
                            return;
                        }
                        elements.tabLinks.forEach((l) => l.classList.remove("active"));
                        link.classList.add("active");
                        elements.tabContents.forEach((c) => c.classList.remove("active"));
                        document.getElementById(`${link.getAttribute("data-tab")}-tab`).classList.add("active");
                    });
                });

                elements.moodButtons.forEach((btn) => {
                    btn.addEventListener("click", () => {
                        elements.moodButtons.forEach((b) => b.classList.remove("selected"));
                        btn.classList.add("selected");

                        const mood = btn.getAttribute("data-mood");
                        const moodValues ={
    excellent: 5,
    good: 4,
    neutral: 3,
    poor: 2,
    terrible: 1,
};
const moodValue = moodValues[mood];
const today = new Date().toISOString().split("T")[0];

if (!state.moodData[state.currentUser]) {
    state.moodData[state.currentUser] = [];
}

const existingMood = state.moodData[state.currentUser].find((entry) => entry.date === today);
if (existingMood) {
    existingMood.value = moodValue;
} else {
    state.moodData[state.currentUser].push({ date: today, value: moodValue });
}

localStorage.setItem("moodData", JSON.stringify(state.moodData));
state.moodChart.destroy();
app.initializeMoodChart();
utils.triggerConfetti();
alert("Mood logged successfully! Keep tracking your progress. üåü");
});
});

elements.actionChecks.forEach((check) => {
    check.addEventListener("click", () => {
        check.classList.toggle("checked");
        if (check.classList.contains("checked")) {
            utils.triggerConfetti();
            const emojiContainer = check.closest(".action-item");
            utils.triggerEmojiBurst(emojiContainer, ["üéâ", "‚úÖ", "üåü"]);
        }
    });
});

elements.feedbackBtn.addEventListener("click", () => {
    const feedback = elements.feedbackText.value.trim();
    if (!feedback) {
        alert("Please provide your feedback before submitting.");
        return;
    }
    alert("Thank you for your feedback! We‚Äôll use it to improve MindAid Pro. üí¨");
    elements.feedbackText.value = "";
    utils.triggerConfetti();
});

elements.sendBtn.addEventListener("click", () => {
    const userMessage = elements.userInput.value.trim();
    if (!userMessage) return;
    utils.addMessage(userMessage, true);
    elements.userInput.value = "";
    const typingIndicator = utils.showTyping();
    chat.generateResponse(userMessage);
    utils.triggerEmojiBurst(elements.chatContainer, ["üòä", "üåü", "üíñ"]);
});

elements.userInput.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        elements.sendBtn.click();
    }
});
};

// Initialize
const init = () => {
    elements.languageSelector.value = state.currentLanguage;
    auth.initialize();
    app.updateChatLanguage();
    setupEventListeners();
};

init();
})();</script>
</body>
</html>
